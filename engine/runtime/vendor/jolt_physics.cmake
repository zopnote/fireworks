

include(ExternalProject)

ExternalProject_Add(
        jolt_physics
        GIT_REPOSITORY https://github.com/jrouwe/JoltPhysics.git
        GIT_TAG v5.3.0
        SOURCE_SUBDIR Build
        INSTALL_COMMAND ""
        BINARY_DIR ${CMAKE_CURRENT_BINARY_DIR}/jolt_physics
        SOURCE_DIR ${CMAKE_CURRENT_BINARY_DIR}/jolt_physics
        CMAKE_GENERATOR ${CMAKE_GENERATOR}
        CMAKE_ARGS
        $<$<BOOL:${CMAKE_TOOLCHAIN_FILE}>:-DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE}>
        $<$<BOOL:${ANDROID_NATIVE_API_LEVEL}>:-DANDROID_NATIVE_API_LEVEL=${ANDROID_NATIVE_API_LEVEL}>
        $<$<BOOL:${ANDROID_ABI}>:-DANDROID_ABI=${ANDROID_ABI}>
        -DENABLE_INSTALL=OFF
        -DUSE_SSE4_1=ON
        -DDOUBLE_PRECISION=ON
        -DGENERATE_DEBUG_SYMBOLS=ON
        -DCROSS_PLATFORM_DETERMINISTIC=ON
        -DINTERPROCEDURAL_OPTIMIZATION=ON
        -DOBJECT_LAYER_BITS=16
        -DUSE_SSE4_1=ON
        -DUSE_SSE4_2=ON
        -DUSE_AVX=ON
        -DUSE_AVX2=ON
        -DUSE_AVX512=OFF
        -DUSE_LZCNT=ON
        -DUSE_TZCNT=ON
        -DUSE_F16C=ON
        -DUSE_FMADD=ON
        -DTARGET_UNIT_TESTS=OFF
        -DTARGET_HELLO_WORLD=OFF
        -DTARGET_PERFORMANCE_TEST=OFF
        -DTARGET_SAMPLES=OFF
        -DTARGET_VIEWER=OFF
)